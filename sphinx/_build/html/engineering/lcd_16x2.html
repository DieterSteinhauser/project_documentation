<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>16x2 LCD Display &mdash; Project Documentation 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="DRV8871 H-Bridge" href="drv8871_h_bridge.html" />
    <link rel="prev" title="LTC1661 DAC" href="ltc1661_dac.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Project Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rpi/rpi_projects.html">Raspberry Pi Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../programming/programming_projects.html">Programming Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fun/fun_projects.html">Entertainment Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="engineering_projects.html">Engineering Projects</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="engineering_reference.html">Engineering Reference and Theory</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="circuit_basics.html">Circuit Foundations</a></li>
<li class="toctree-l2"><a class="reference internal" href="passive_components.html">Passive Components</a></li>
<li class="toctree-l2"><a class="reference internal" href="passive_filters.html">Passive Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="diodes.html">Diodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="bjt.html">BJTs Bipolar Junction Transistors</a></li>
<li class="toctree-l2"><a class="reference internal" href="fet.html">FETs Field Effect Transistors</a></li>
<li class="toctree-l2"><a class="reference internal" href="op_amp.html">Operational Amplifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="active_filters.html">Active Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="instrument_amps.html">Instrumentation Amplifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="linear_regulators.html">Linear Regulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="circuit_apps.html">Circuit Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_conversion.html">Data Conversion: ADC and DAC Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="communication_protocols.html">Communication Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="raspberry_pico.html">Raspberry Pico Microcontroller</a></li>
<li class="toctree-l2"><a class="reference internal" href="ltc1661_dac.html">LTC1661 DAC</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">16x2 LCD Display</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code">Code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="drv8871_h_bridge.html">DRV8871 H-Bridge</a></li>
<li class="toctree-l2"><a class="reference internal" href="ultrasonic_sensor.html">Ultrasonic Sensors</a></li>
<li class="toctree-l2"><a class="reference internal" href="battery_monitor.html">Battery Monitoring System</a></li>
<li class="toctree-l2"><a class="reference internal" href="helpers.html">Helper Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="i2c_device.html">I2C Device Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="tca9548.html">TCA9548 I2C Switch Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="tps55288.html">TPS55288 DC/DC Buck-Boost I2C Driver</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Project Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="engineering_reference.html">Engineering Reference and Theory</a> &raquo;</li>
      <li>16x2 LCD Display</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/engineering/lcd_16x2.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="x2-lcd-display">
<h1>16x2 LCD Display<a class="headerlink" href="#x2-lcd-display" title="Permalink to this headline"></a></h1>
<figure class="align-center" id="id3">
<img alt="../_images/lcd_i2c.png" src="../_images/lcd_i2c.png" />
<figcaption>
<p><span class="caption-text">16x2 LCD Display with I2C Driver.</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>LCD Displays can be configured for I2C or Parallel communication with a microcontroller.
When configured with an I2C driver, much of the following is abstracted away for the user. Contrast, brightness, and
pinouts are much less complicated in this approach at the cost of price and speed.</p>
<figure class="align-center" id="id4">
<img alt="../_images/lcd.png" src="../_images/lcd.png" />
<figcaption>
<p><span class="caption-text">16x2 LCD Display without I2C Driver.</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Using parallel communication, the LCD is wired to the microcontroller with either four-bit or
eight bit communication <a class="footnote-reference brackets" href="#id2" id="id1">1</a>. A potentiometer should be connected for contrast control of the LCD, and a 500 ohm
resistor for brightness control. If the user desires adaptive brightness control, a photoresistor and 1k-ohm
resistor can be connected in parallel.</p>
<figure class="align-center" id="id5">
<img alt="../_images/lcd_pinout.png" src="../_images/lcd_pinout.png" />
<figcaption>
<p><span class="caption-text">16x2 LCD Display Pinout</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Using 4-bit parallel communication, a nibble of data is sent to the display simultaneously. 8-bit parallel will
communicate a full byte simultaneously. Regardless of method, a full byte of data is then sent to the device
in a process called bit-banging. This splits a byte of data to send two nibbles in series for 4-bit communication,
ordered by the upper four bits and then the lower four bits.</p>
<figure class="align-center" id="id6">
<img alt="../_images/lcd_nibble_wiring.png" src="../_images/lcd_nibble_wiring.png" />
<figcaption>
<p><span class="caption-text">Wiring for parallel nibble communication.</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<dl class="py class">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">src.pico_devboard.LCD.</span></span><span class="sig-name descname"><span class="pre">LCD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">enable_pin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reg_select_pin</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_pins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD" title="Permalink to this definition"></a></dt>
<dd><p>The LCD class is meant to abstract the LCD driver further and streamline development.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.CMD_MODE">
<span class="sig-name descname"><span class="pre">CMD_MODE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0</span></em><a class="headerlink" href="#src.pico_devboard.LCD.LCD.CMD_MODE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.DATA_MODE">
<span class="sig-name descname"><span class="pre">DATA_MODE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">1</span></em><a class="headerlink" href="#src.pico_devboard.LCD.LCD.DATA_MODE" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.blink">
<span class="sig-name descname"><span class="pre">blink</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.blink" title="Permalink to this definition"></a></dt>
<dd><p>Have the cursor start blinking.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.clear" title="Permalink to this definition"></a></dt>
<dd><p>Clears the LCD Screen.</p>
<p>Good to perform on occasion but produces flashing on screen when triggered consistently.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.cursor_off">
<span class="sig-name descname"><span class="pre">cursor_off</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.cursor_off" title="Permalink to this definition"></a></dt>
<dd><p>Turn the cursor off.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.cursor_on">
<span class="sig-name descname"><span class="pre">cursor_on</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.cursor_on" title="Permalink to this definition"></a></dt>
<dd><p>Have the cursor on, Good for debugging.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.go_to">
<span class="sig-name descname"><span class="pre">go_to</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.go_to" title="Permalink to this definition"></a></dt>
<dd><p>Move the cursor to a specific column and row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<em>int</em>) – Column index, 0-15. May be higher on different size LCDs</p></li>
<li><p><strong>row</strong> (<em>int</em>) – Row index, 0-1. May be higher on different size LCDs</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.home">
<span class="sig-name descname"><span class="pre">home</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.home" title="Permalink to this definition"></a></dt>
<dd><p>Return the Cursor to the starting position.</p>
<p>Functionally the same as using the go_to function and specifying (0, 0) coordinates.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.init">
<span class="sig-name descname"><span class="pre">init</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.init" title="Permalink to this definition"></a></dt>
<dd><p>Initializes the LCD for communication.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.print">
<span class="sig-name descname"><span class="pre">print</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">string</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.print" title="Permalink to this definition"></a></dt>
<dd><p>Write a string on to the LCD.</p>
<p>Wrapper of the string function with more descriptive naming.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>string</strong> (<em>str</em>) – String desired to be written.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.strobe">
<span class="sig-name descname"><span class="pre">strobe</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.strobe" title="Permalink to this definition"></a></dt>
<dd><p>Flashes the enable line and provides wait period.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="src.pico_devboard.LCD.LCD.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#src.pico_devboard.LCD.LCD.write" title="Permalink to this definition"></a></dt>
<dd><p>Sends data to the LCD module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>) – Information packet being sent to the LCD.</p></li>
<li><p><strong>mode</strong> (<em>int</em>) – Mode of operation for the LCD, either command mode (1) or data mode (0)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<section id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline"></a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="c1"># -----------------------------------------</span>
<span class="linenos">  2</span><span class="c1">#                 NOTES </span>
<span class="linenos">  3</span><span class="c1"># -----------------------------------------</span>
<span class="linenos">  4</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  5</span><span class="sd">Dieter Steinhauser</span>
<span class="linenos">  6</span><span class="sd">5/2023</span>
<span class="linenos">  7</span><span class="sd">Parallel LCD functions, Configured for 4-bit communication.</span>
<span class="linenos">  8</span><span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">  9</span>
<span class="linenos"> 10</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 11</span><span class="c1">#               IMPORTS</span>
<span class="linenos"> 12</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 13</span>
<span class="linenos"> 14</span><span class="kn">from</span> <span class="nn">machine</span> <span class="kn">import</span> <span class="n">Pin</span>
<span class="linenos"> 15</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos"> 16</span><span class="n">utime</span> <span class="o">=</span> <span class="n">time</span>
<span class="linenos"> 17</span>
<span class="linenos"> 18</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 19</span><span class="c1">#          CONSTANTS AND VARIABLES</span>
<span class="linenos"> 20</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 21</span>
<span class="linenos"> 22</span><span class="c1"># CONSTANTS</span>
<span class="linenos"> 23</span><span class="c1"># ----------------------</span>
<span class="linenos"> 24</span>
<span class="linenos"> 25</span><span class="n">LCD_CMD</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos"> 26</span><span class="n">LCD_DATA</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos"> 27</span>
<span class="linenos"> 28</span><span class="c1"># ----------------------</span>
<span class="linenos"> 29</span><span class="c1"># GPIO Wiring: Legacy Structure</span>
<span class="linenos"> 30</span><span class="c1"># ----------------------</span>
<span class="linenos"> 31</span>
<span class="linenos"> 32</span><span class="c1"># EN = Pin(0, Pin.OUT) # Enable Pin</span>
<span class="linenos"> 33</span><span class="c1"># RS = Pin(1, Pin.OUT) # Register Select</span>
<span class="linenos"> 34</span>
<span class="linenos"> 35</span><span class="c1"># PINS = [2, 3, 4, 5]  </span>
<span class="linenos"> 36</span><span class="c1"># Pin numbers for the upper nibble, does the below assignment in configure method.</span>
<span class="linenos"> 37</span><span class="c1"># D4 = Pin(2, Pin.OUT)</span>
<span class="linenos"> 38</span><span class="c1"># D5 = Pin(3, Pin.OUT)</span>
<span class="linenos"> 39</span><span class="c1"># D6 = Pin(4, Pin.OUT)</span>
<span class="linenos"> 40</span><span class="c1"># D7 = Pin(5, Pin.OUT)</span>
<span class="linenos"> 41</span> 
<span class="linenos"> 42</span><span class="c1"># list that gets populated with pinout objects for data line.</span>
<span class="linenos"> 43</span><span class="c1"># DATA_BUS = []</span>
<span class="linenos"> 44</span>
<span class="linenos"> 45</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 46</span><span class="c1">#                 METHODS</span>
<span class="linenos"> 47</span><span class="c1"># -----------------------------------------</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="c1"># def Configure():</span>
<span class="linenos"> 50</span><span class="c1">#     &quot;&quot;&quot;Creates the data bus object from the pin list&quot;&quot;&quot;</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span><span class="c1">#     for index in range(4):</span>
<span class="linenos"> 53</span><span class="c1">#        DATA_BUS.append(Pin(PINS[index], Pin.OUT))</span>
<span class="linenos"> 54</span>
<span class="linenos"> 55</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="c1"># def lcd_strobe():</span>
<span class="linenos"> 58</span><span class="c1">#     &quot;&quot;&quot;Flashes the enable line and provides wait period.&quot;&quot;&quot;</span>
<span class="linenos"> 59</span>
<span class="linenos"> 60</span><span class="c1">#     EN.value(1)</span>
<span class="linenos"> 61</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos"> 62</span>
<span class="linenos"> 63</span><span class="c1">#     EN.value(0)</span>
<span class="linenos"> 64</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos"> 65</span>
<span class="linenos"> 66</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos"> 67</span> 
<span class="linenos"> 68</span><span class="c1"># def lcd_write(command, mode):</span>
<span class="linenos"> 69</span><span class="c1">#     &quot;&quot;&quot;Sends data to the LCD module. &quot;&quot;&quot;</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="c1">#     # determine if writing a command or data</span>
<span class="linenos"> 72</span><span class="c1">#     data = command if mode == 0 else ord(command)</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="c1">#     # need upper nibble for first loop. lower nibble can use data directly.</span>
<span class="linenos"> 75</span><span class="c1">#     upper = data &gt;&gt; 4</span>
<span class="linenos"> 76</span>    
<span class="linenos"> 77</span><span class="c1">#     # write the upper nibble</span>
<span class="linenos"> 78</span><span class="c1">#     for index in range(4):</span>
<span class="linenos"> 79</span><span class="c1">#         bit = upper &amp; 1</span>
<span class="linenos"> 80</span><span class="c1">#         DATA_BUS[index].value(bit)</span>
<span class="linenos"> 81</span><span class="c1">#         upper = upper &gt;&gt; 1</span>
<span class="linenos"> 82</span>
<span class="linenos"> 83</span><span class="c1">#     # strobe the LCD, sending the nibble</span>
<span class="linenos"> 84</span><span class="c1">#     RS.value(mode)</span>
<span class="linenos"> 85</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span><span class="c1">#     # write the lower nibble</span>
<span class="linenos"> 88</span><span class="c1">#     for index in range(4):</span>
<span class="linenos"> 89</span><span class="c1">#         bit = data &amp; 1</span>
<span class="linenos"> 90</span><span class="c1">#         DATA_BUS[index].value(bit)</span>
<span class="linenos"> 91</span><span class="c1">#         data = data &gt;&gt; 1</span>
<span class="linenos"> 92</span>
<span class="linenos"> 93</span><span class="c1">#     # Strobe the LCD, sending the nibble </span>
<span class="linenos"> 94</span><span class="c1">#     RS.value(mode)</span>
<span class="linenos"> 95</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos"> 96</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos"> 97</span><span class="c1">#     RS.value(1)</span>
<span class="linenos"> 98</span>
<span class="linenos"> 99</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">100</span>
<span class="linenos">101</span><span class="c1"># def lcd_clear():</span>
<span class="linenos">102</span><span class="c1">#     &quot;&quot;&quot;Clear the LCD Screen.&quot;&quot;&quot;</span>
<span class="linenos">103</span>
<span class="linenos">104</span><span class="c1">#     lcd_write(0x01, 0)</span>
<span class="linenos">105</span><span class="c1">#     utime.sleep_ms(5)</span>
<span class="linenos">106</span>
<span class="linenos">107</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">108</span>
<span class="linenos">109</span><span class="c1"># def lcd_home():</span>
<span class="linenos">110</span><span class="c1">#     &quot;&quot;&quot;Return the Cursor to the starting position.&quot;&quot;&quot;</span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="c1">#     lcd_write(0x02, 0)</span>
<span class="linenos">113</span><span class="c1">#     utime.sleep_ms(5)</span>
<span class="linenos">114</span>
<span class="linenos">115</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">116</span>
<span class="linenos">117</span>
<span class="linenos">118</span><span class="c1"># def lcd_cursor_blink():</span>
<span class="linenos">119</span><span class="c1">#     &quot;&quot;&quot;Have the cursor start blinking.&quot;&quot;&quot;</span>
<span class="linenos">120</span>
<span class="linenos">121</span><span class="c1">#     lcd_write(0x0D, 0)</span>
<span class="linenos">122</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos">123</span>
<span class="linenos">124</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">125</span>
<span class="linenos">126</span><span class="c1"># def lcd_cursor_on():</span>
<span class="linenos">127</span><span class="c1">#     &quot;&quot;&quot;Have the cursor on, Good for debugging.&quot;&quot;&quot;</span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="c1">#     lcd_write(0x0E, 0)</span>
<span class="linenos">130</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos">131</span>
<span class="linenos">132</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">133</span>
<span class="linenos">134</span><span class="c1"># def lcd_cursor_off():</span>
<span class="linenos">135</span><span class="c1">#     &quot;&quot;&quot;Turn the cursor off.&quot;&quot;&quot;</span>
<span class="linenos">136</span>
<span class="linenos">137</span><span class="c1">#     lcd_write(0x0C, 0)</span>
<span class="linenos">138</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos">139</span>
<span class="linenos">140</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">141</span>
<span class="linenos">142</span><span class="c1"># def lcd_puts(string):</span>
<span class="linenos">143</span><span class="c1">#     &quot;&quot;&quot;Write a string on to the LCD.&quot;&quot;&quot;</span>
<span class="linenos">144</span>
<span class="linenos">145</span><span class="c1">#     for element in string:</span>
<span class="linenos">146</span><span class="c1">#        lcd_putch(element)</span>
<span class="linenos">147</span>
<span class="linenos">148</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">149</span>
<span class="linenos">150</span><span class="c1"># def lcd_putch(c):</span>
<span class="linenos">151</span><span class="c1">#     &quot;&quot;&quot;Write a character on to the LCD.&quot;&quot;&quot;</span>
<span class="linenos">152</span><span class="c1">#     lcd_write(c, 1)</span>
<span class="linenos">153</span>
<span class="linenos">154</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">155</span>
<span class="linenos">156</span><span class="c1"># def lcd_goto(column, row):</span>
<span class="linenos">157</span>    
<span class="linenos">158</span>    
<span class="linenos">159</span><span class="c1">#     if row == 0:</span>
<span class="linenos">160</span><span class="c1">#         address = 0</span>
<span class="linenos">161</span>
<span class="linenos">162</span><span class="c1">#     if row == 1:</span>
<span class="linenos">163</span><span class="c1">#         address = 0x40</span>
<span class="linenos">164</span>
<span class="linenos">165</span><span class="c1">#     if row == 2:</span>
<span class="linenos">166</span><span class="c1">#         address = 0x14</span>
<span class="linenos">167</span>
<span class="linenos">168</span><span class="c1">#     if row == 3:</span>
<span class="linenos">169</span><span class="c1">#         address = 0x54</span>
<span class="linenos">170</span>
<span class="linenos">171</span><span class="c1">#     address = address + column</span>
<span class="linenos">172</span><span class="c1">#     lcd_write(0x80 | address, 0)</span>
<span class="linenos">173</span>
<span class="linenos">174</span><span class="c1"># # -----------------------------------------</span>
<span class="linenos">175</span>
<span class="linenos">176</span><span class="c1"># def lcd_init():</span>
<span class="linenos">177</span>    
<span class="linenos">178</span><span class="c1">#     # Configure the pins of the device.</span>
<span class="linenos">179</span><span class="c1">#     Configure()</span>
<span class="linenos">180</span><span class="c1">#     utime.sleep_ms(120)</span>
<span class="linenos">181</span>
<span class="linenos">182</span><span class="c1">#     # clear values on data bus.</span>
<span class="linenos">183</span><span class="c1">#     for index in range(4):</span>
<span class="linenos">184</span><span class="c1">#         DATA_BUS[index].value(0)</span>
<span class="linenos">185</span><span class="c1">#     utime.sleep_ms(50)</span>
<span class="linenos">186</span>
<span class="linenos">187</span><span class="c1">#     # initialization sequence.</span>
<span class="linenos">188</span><span class="c1">#     DATA_BUS[0].value(1)</span>
<span class="linenos">189</span><span class="c1">#     DATA_BUS[1].value(1)</span>
<span class="linenos">190</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos">191</span><span class="c1">#     utime.sleep_ms(10)</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos">194</span><span class="c1">#     utime.sleep_ms(10)</span>
<span class="linenos">195</span>
<span class="linenos">196</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos">197</span><span class="c1">#     utime.sleep_ms(10)</span>
<span class="linenos">198</span>
<span class="linenos">199</span><span class="c1">#     DATA_BUS[0].value(0)</span>
<span class="linenos">200</span><span class="c1">#     lcd_strobe()</span>
<span class="linenos">201</span><span class="c1">#     utime.sleep_ms(5)</span>
<span class="linenos">202</span>
<span class="linenos">203</span><span class="c1">#     lcd_write(0x28, 0)</span>
<span class="linenos">204</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos">205</span>
<span class="linenos">206</span><span class="c1">#     lcd_write(0x08, 0)</span>
<span class="linenos">207</span><span class="c1">#     utime.sleep_ms(1)</span>
<span class="linenos">208</span>
<span class="linenos">209</span><span class="c1">#     lcd_write(0x01, 0)</span>
<span class="linenos">210</span><span class="c1">#     utime.sleep_ms(10)</span>
<span class="linenos">211</span>
<span class="linenos">212</span><span class="c1">#     lcd_write(0x06, 0)</span>
<span class="linenos">213</span><span class="c1">#     utime.sleep_ms(5)</span>
<span class="linenos">214</span>
<span class="linenos">215</span><span class="c1">#     lcd_write(0x0C, 0)</span>
<span class="linenos">216</span><span class="c1">#     utime.sleep_ms(10)</span>
<span class="linenos">217</span>
<span class="linenos">218</span>
<span class="linenos">219</span><span class="c1"># -----------------------------------------</span>
<span class="linenos">220</span><span class="c1">#                 LCD Class:</span>
<span class="linenos">221</span><span class="c1"># -----------------------------------------</span>
<span class="linenos">222</span>
<span class="linenos">223</span>
<span class="linenos">224</span><span class="k">class</span> <span class="nc">LCD</span><span class="p">:</span>
<span class="linenos">225</span>    <span class="sd">&quot;&quot;&quot;The LCD class is meant to abstract the LCD driver further and streamline development.&quot;&quot;&quot;</span>
<span class="linenos">226</span>
<span class="linenos">227</span>    <span class="n">CMD_MODE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">228</span>    <span class="n">DATA_MODE</span> <span class="o">=</span> <span class="mi">1</span>
<span class="linenos">229</span>
<span class="linenos">230</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enable_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">reg_select_pin</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">data_pins</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos">231</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">232</span><span class="sd">        Object initialization.</span>
<span class="linenos">233</span>
<span class="linenos">234</span><span class="sd">        :param enable_pin: integer value of the enable pin desired.</span>
<span class="linenos">235</span><span class="sd">        :type enable_pin: int</span>
<span class="linenos">236</span><span class="sd">        :param reg_select_pin: integer value of the reg_select pin desired.</span>
<span class="linenos">237</span><span class="sd">        :type reg_select_pin: int</span>
<span class="linenos">238</span><span class="sd">        :param data_pins: list of integer values for the data pins desired in communication.</span>
<span class="linenos">239</span><span class="sd">        :type data_pins: list[int]</span>
<span class="linenos">240</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">241</span>
<span class="linenos">242</span>        <span class="bp">self</span><span class="o">.</span><span class="n">enable_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">enable_pin</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="linenos">243</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reg_select_pin</span> <span class="o">=</span> <span class="n">Pin</span><span class="p">(</span><span class="n">reg_select_pin</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="linenos">244</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_pins</span> <span class="o">=</span> <span class="n">data_pins</span>
<span class="linenos">245</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span> <span class="o">=</span> <span class="p">[]</span>
<span class="linenos">246</span>        
<span class="linenos">247</span>        <span class="c1"># Configure the pins of the device.</span>
<span class="linenos">248</span>        <span class="bp">self</span><span class="o">.</span><span class="n">_configure</span><span class="p">()</span>
<span class="linenos">249</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">120</span><span class="p">)</span>
<span class="linenos">250</span>
<span class="linenos">251</span>    <span class="c1"># -----------------------------------------    </span>
<span class="linenos">252</span>
<span class="linenos">253</span>    <span class="k">def</span> <span class="nf">_configure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">254</span>        <span class="sd">&quot;&quot;&quot;Creates the data bus object from the pin list. &quot;&quot;&quot;</span>
<span class="linenos">255</span>
<span class="linenos">256</span>        <span class="c1"># Configure the pins of the device.</span>
<span class="linenos">257</span>        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_pins</span><span class="p">:</span>
<span class="linenos">258</span>            <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Pin</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">))</span>
<span class="linenos">259</span>
<span class="linenos">260</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">261</span>
<span class="linenos">262</span>    <span class="k">def</span> <span class="nf">init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">263</span>        <span class="sd">&quot;&quot;&quot;Initializes the LCD for communication.&quot;&quot;&quot;</span>
<span class="linenos">264</span>
<span class="linenos">265</span>        <span class="c1"># clear values on data bus.</span>
<span class="linenos">266</span>        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<span class="linenos">267</span>            <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">268</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
<span class="linenos">269</span>
<span class="linenos">270</span>        <span class="c1"># initialization sequence.</span>
<span class="linenos">271</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">272</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">273</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">274</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">275</span>
<span class="linenos">276</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">277</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">278</span>
<span class="linenos">279</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">280</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">281</span>
<span class="linenos">282</span>        <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">283</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">284</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos">285</span>
<span class="linenos">286</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x28</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">287</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">288</span>
<span class="linenos">289</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x08</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">290</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">291</span>
<span class="linenos">292</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">293</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">294</span>
<span class="linenos">295</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x06</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">296</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos">297</span>
<span class="linenos">298</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x0C</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">299</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="linenos">300</span>
<span class="linenos">301</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">302</span>
<span class="linenos">303</span>    <span class="k">def</span> <span class="nf">strobe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">304</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">305</span><span class="sd">        Flashes the enable line and provides wait period.</span>
<span class="linenos">306</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">307</span>
<span class="linenos">308</span>        <span class="bp">self</span><span class="o">.</span><span class="n">enable_pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">309</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">310</span>
<span class="linenos">311</span>        <span class="bp">self</span><span class="o">.</span><span class="n">enable_pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">312</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">313</span>
<span class="linenos">314</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">315</span>    
<span class="linenos">316</span>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">command</span><span class="p">,</span> <span class="n">mode</span><span class="p">):</span>
<span class="linenos">317</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">318</span><span class="sd">        Sends data to the LCD module.</span>
<span class="linenos">319</span>
<span class="linenos">320</span><span class="sd">        :param command: Information packet being sent to the LCD.</span>
<span class="linenos">321</span><span class="sd">        :type command: str</span>
<span class="linenos">322</span><span class="sd">        :param mode: Mode of operation for the LCD, either command mode (1) or data mode (0)</span>
<span class="linenos">323</span><span class="sd">        :type mode: int</span>
<span class="linenos">324</span><span class="sd">        :return: None</span>
<span class="linenos">325</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">326</span>
<span class="linenos">327</span>        <span class="c1"># determine if writing a command or data</span>
<span class="linenos">328</span>        <span class="n">data</span> <span class="o">=</span> <span class="n">command</span> <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">ord</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
<span class="linenos">329</span>
<span class="linenos">330</span>        <span class="c1"># need upper nibble for first loop. lower nibble can use data directly.</span>
<span class="linenos">331</span>        <span class="n">upper</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span>
<span class="linenos">332</span>        
<span class="linenos">333</span>        <span class="c1"># write the upper nibble</span>
<span class="linenos">334</span>        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<span class="linenos">335</span>            <span class="n">bit</span> <span class="o">=</span> <span class="n">upper</span> <span class="o">&amp;</span> <span class="mi">1</span>
<span class="linenos">336</span>            <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
<span class="linenos">337</span>            <span class="n">upper</span> <span class="o">=</span> <span class="n">upper</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
<span class="linenos">338</span>
<span class="linenos">339</span>        <span class="c1"># strobe the LCD, sending the nibble</span>
<span class="linenos">340</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reg_select_pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
<span class="linenos">341</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">342</span>
<span class="linenos">343</span>        <span class="c1"># write the lower nibble</span>
<span class="linenos">344</span>        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
<span class="linenos">345</span>            <span class="n">bit</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&amp;</span> <span class="mi">1</span>
<span class="linenos">346</span>            <span class="bp">self</span><span class="o">.</span><span class="n">data_bus</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">bit</span><span class="p">)</span>
<span class="linenos">347</span>            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span> <span class="o">&gt;&gt;</span> <span class="mi">1</span>
<span class="linenos">348</span>
<span class="linenos">349</span>        <span class="c1"># Strobe the LCD, sending the nibble </span>
<span class="linenos">350</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reg_select_pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
<span class="linenos">351</span>        <span class="bp">self</span><span class="o">.</span><span class="n">strobe</span><span class="p">()</span>
<span class="linenos">352</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">353</span>        <span class="bp">self</span><span class="o">.</span><span class="n">reg_select_pin</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">354</span>
<span class="linenos">355</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">356</span>
<span class="linenos">357</span>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">358</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">359</span><span class="sd">        Clears the LCD Screen.</span>
<span class="linenos">360</span>
<span class="linenos">361</span><span class="sd">        Good to perform on occasion but produces flashing on screen when triggered consistently.</span>
<span class="linenos">362</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">363</span>
<span class="linenos">364</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x01</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">365</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos">366</span>
<span class="linenos">367</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">368</span>
<span class="linenos">369</span>    <span class="k">def</span> <span class="nf">home</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">370</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">371</span><span class="sd">        Return the Cursor to the starting position.</span>
<span class="linenos">372</span>
<span class="linenos">373</span><span class="sd">        Functionally the same as using the go_to function and specifying (0, 0) coordinates.</span>
<span class="linenos">374</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">375</span>
<span class="linenos">376</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x02</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">377</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="linenos">378</span>
<span class="linenos">379</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">380</span>
<span class="linenos">381</span>
<span class="linenos">382</span>    <span class="k">def</span> <span class="nf">blink</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">383</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">384</span><span class="sd">        Have the cursor start blinking.</span>
<span class="linenos">385</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">386</span>
<span class="linenos">387</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x0D</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">388</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">389</span>
<span class="linenos">390</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">391</span>
<span class="linenos">392</span>    <span class="k">def</span> <span class="nf">cursor_on</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">393</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">394</span><span class="sd">        Have the cursor on, Good for debugging.</span>
<span class="linenos">395</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">396</span>
<span class="linenos">397</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x0E</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">398</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">399</span>
<span class="linenos">400</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">401</span>
<span class="linenos">402</span>    <span class="k">def</span> <span class="nf">cursor_off</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="linenos">403</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">404</span><span class="sd">        Turn the cursor off.</span>
<span class="linenos">405</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">406</span>
<span class="linenos">407</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x0C</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">408</span>        <span class="n">utime</span><span class="o">.</span><span class="n">sleep_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">409</span>
<span class="linenos">410</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">411</span>
<span class="linenos">412</span>    <span class="k">def</span> <span class="nf">print</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
<span class="linenos">413</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">414</span><span class="sd">        Write a string on to the LCD.</span>
<span class="linenos">415</span>
<span class="linenos">416</span><span class="sd">        Wrapper of the string function with more descriptive naming.</span>
<span class="linenos">417</span>
<span class="linenos">418</span><span class="sd">        :param string: String desired to be written.</span>
<span class="linenos">419</span><span class="sd">        :type string: str</span>
<span class="linenos">420</span>
<span class="linenos">421</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">422</span>
<span class="linenos">423</span>        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
<span class="linenos">424</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_putch</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="linenos">425</span>
<span class="linenos">426</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">427</span>
<span class="linenos">428</span>    <span class="k">def</span> <span class="nf">_putch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="linenos">429</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">430</span><span class="sd">        Write a character on to the LCD.</span>
<span class="linenos">431</span>
<span class="linenos">432</span><span class="sd">        Protected because the method is less intuitive compared to the print.</span>
<span class="linenos">433</span>
<span class="linenos">434</span><span class="sd">        :param c: ASCII character.</span>
<span class="linenos">435</span><span class="sd">        :type c: str</span>
<span class="linenos">436</span><span class="sd">        :return: None</span>
<span class="linenos">437</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">438</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">439</span>
<span class="linenos">440</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">441</span>
<span class="linenos">442</span>    <span class="k">def</span> <span class="nf">_puts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">string</span><span class="p">):</span>
<span class="linenos">443</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">444</span><span class="sd">        Write a string on to the LCD.</span>
<span class="linenos">445</span>
<span class="linenos">446</span><span class="sd">        :param string: String desired to be written.</span>
<span class="linenos">447</span><span class="sd">        :type string: str</span>
<span class="linenos">448</span><span class="sd">        :return: None</span>
<span class="linenos">449</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">450</span>
<span class="linenos">451</span>        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">string</span><span class="p">:</span>
<span class="linenos">452</span>            <span class="bp">self</span><span class="o">.</span><span class="n">_putch</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="linenos">453</span>
<span class="linenos">454</span>    <span class="c1"># -----------------------------------------</span>
<span class="linenos">455</span>    <span class="k">def</span> <span class="nf">go_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">row</span><span class="p">):</span>
<span class="linenos">456</span>        <span class="sd">&quot;&quot;&quot;</span>
<span class="linenos">457</span><span class="sd">        Move the cursor to a specific column and row.</span>
<span class="linenos">458</span>
<span class="linenos">459</span><span class="sd">        :param column: Column index, 0-15. May be higher on different size LCDs</span>
<span class="linenos">460</span><span class="sd">        :type column: int</span>
<span class="linenos">461</span><span class="sd">        :param row: Row index, 0-1. May be higher on different size LCDs</span>
<span class="linenos">462</span><span class="sd">        :type row: int</span>
<span class="linenos">463</span><span class="sd">        :return: None</span>
<span class="linenos">464</span><span class="sd">        &quot;&quot;&quot;</span>
<span class="linenos">465</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="linenos">466</span>            <span class="n">address</span> <span class="o">=</span> <span class="mi">0</span>
<span class="linenos">467</span>
<span class="linenos">468</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="linenos">469</span>            <span class="n">address</span> <span class="o">=</span> <span class="mh">0x40</span>
<span class="linenos">470</span>
<span class="linenos">471</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="linenos">472</span>            <span class="n">address</span> <span class="o">=</span> <span class="mh">0x14</span>
<span class="linenos">473</span>
<span class="linenos">474</span>        <span class="k">if</span> <span class="n">row</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<span class="linenos">475</span>            <span class="n">address</span> <span class="o">=</span> <span class="mh">0x54</span>
<span class="linenos">476</span>
<span class="linenos">477</span>        <span class="n">address</span> <span class="o">=</span> <span class="n">address</span> <span class="o">+</span> <span class="n">column</span>
<span class="linenos">478</span>        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mh">0x80</span> <span class="o">|</span> <span class="n">address</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="linenos">479</span>
<span class="linenos">480</span> 
<span class="linenos">481</span><span class="c1"># -----------------------------------------</span>
<span class="linenos">482</span><span class="c1">#              END OF FILE</span>
<span class="linenos">483</span><span class="c1"># -----------------------------------------</span>
</pre></div>
</div>
<p><strong>References</strong></p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>“Sitronix ST7066U - Crystalfontz,” crystalfontz. [Online]. Available:
<a class="reference external" href="https://www.crystalfontz.com/controllers/Sitronix/ST7066U/438">https://www.crystalfontz.com/controllers/Sitronix/ST7066U/438</a>. [Accessed: 03-Oct2022].</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="ltc1661_dac.html" class="btn btn-neutral float-left" title="LTC1661 DAC" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="drv8871_h_bridge.html" class="btn btn-neutral float-right" title="DRV8871 H-Bridge" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Dieter Steinhauser.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>